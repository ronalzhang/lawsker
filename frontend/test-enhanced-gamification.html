<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢å¼ºæ¸¸æˆåŒ–ç³»ç»Ÿæµ‹è¯• - å¾‹å®¢</title>
    
    <!-- Modern Design System -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/design-system.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/gamification.css">
    <link rel="stylesheet" href="/css/enhanced-gamification.css">
    
    <!-- JavaScript Files -->
    <script src="/js/icon-system.js"></script>
    <script src="/js/gamification.js"></script>
    <script src="/js/enhanced-gamification.js"></script>
    <!-- ä¸“ä¸šå›¾æ ‡ç³»ç»Ÿ -->
    <script src="/js/professional-icon-library.js"></script>
    <script src="/js/icon-upgrade-system.js"></script>
    
    <style>
        body {
            background-color: var(--bg-secondary);
            padding: var(--space-8);
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }
        
        .test-title {
            font-size: var(--text-3xl);
            font-weight: var(--font-bold);
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }
        
        .test-description {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            margin-bottom: var(--space-6);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }
        
        .test-section {
            background-color: var(--bg-primary);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
        }
        
        .test-section-title {
            font-size: var(--text-xl);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }
        
        .test-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
        }
        
        .test-button {
            padding: var(--space-3) var(--space-4);
            border: none;
            border-radius: var(--radius-lg);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .test-button.primary {
            background-color: var(--primary-600);
            color: white;
        }
        
        .test-button.primary:hover {
            background-color: var(--primary-700);
        }
        
        .test-button.success {
            background-color: var(--success-600);
            color: white;
        }
        
        .test-button.success:hover {
            background-color: var(--success-700);
        }
        
        .test-button.warning {
            background-color: var(--warning-600);
            color: white;
        }
        
        .test-button.warning:hover {
            background-color: var(--warning-700);
        }
        
        .test-button.error {
            background-color: var(--error-600);
            color: white;
        }
        
        .test-button.error:hover {
            background-color: var(--error-700);
        }
        
        .current-stats {
            background-color: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-bottom: var(--space-4);
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-2) 0;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .stat-item:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }
        
        .stat-value {
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
        }
        
        .demo-controls {
            background-color: var(--bg-primary);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-8);
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }
        
        .control-label {
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--text-primary);
        }
        
        .control-input {
            padding: var(--space-2) var(--space-3);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
        }
        
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <!-- Test Header -->
        <div class="test-header">
            <h1 class="test-title">ğŸ® å¢å¼ºæ¸¸æˆåŒ–ç³»ç»Ÿæµ‹è¯•</h1>
            <p class="test-description">
                æµ‹è¯•å¾‹å¸ˆç§¯åˆ†å˜åŒ–åŠ¨ç”»åé¦ˆå’Œç­‰çº§æå‡åº†ç¥æ•ˆæœ
            </p>
        </div>
        
        <!-- Demo Controls -->
        <div class="demo-controls">
            <h2 class="test-section-title">ğŸ›ï¸ æ¼”ç¤ºæ§åˆ¶</h2>
            <div class="controls-grid">
                <div class="control-group">
                    <label class="control-label">è‡ªå®šä¹‰ç§¯åˆ†</label>
                    <input type="number" id="customPoints" class="control-input" value="200" min="-500" max="1000">
                </div>
                <div class="control-group">
                    <label class="control-label">ç§¯åˆ†å€æ•°</label>
                    <select id="multiplier" class="control-input">
                        <option value="1">1x (å…è´¹ä¼šå‘˜)</option>
                        <option value="2" selected>2x (ä¸“ä¸šä¼šå‘˜)</option>
                        <option value="3">3x (ä¼ä¸šä¼šå‘˜)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">æ“ä½œç±»å‹</label>
                    <select id="actionType" class="control-input">
                        <option value="case_complete_success">æ¡ˆä»¶å®Œæˆ</option>
                        <option value="review_5star">äº”æ˜Ÿå¥½è¯„</option>
                        <option value="online_hour">åœ¨çº¿å¥–åŠ±</option>
                        <option value="ai_credit_used">AIä½¿ç”¨</option>
                        <option value="payment_100yuan">å……å€¼å¥–åŠ±</option>
                        <option value="case_declined">æ‹’ç»æ¡ˆä»¶</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">ç›®æ ‡ç­‰çº§</label>
                    <select id="targetLevel" class="control-input">
                        <option value="2">2çº§ - åˆçº§å¾‹å¸ˆ</option>
                        <option value="3">3çº§ - ä¸­çº§å¾‹å¸ˆ</option>
                        <option value="4">4çº§ - é«˜çº§å¾‹å¸ˆ</option>
                        <option value="5">5çº§ - èµ„æ·±å¾‹å¸ˆ</option>
                        <option value="6">6çº§ - ä¸“å®¶å¾‹å¸ˆ</option>
                        <option value="7">7çº§ - é¦–å¸­å¾‹å¸ˆ</option>
                        <option value="8">8çº§ - åˆä¼™äººå¾‹å¸ˆ</option>
                        <option value="9">9çº§ - é«˜çº§åˆä¼™äºº</option>
                        <option value="10">10çº§ - é¦–å¸­åˆä¼™äºº</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- Test Grid -->
        <div class="test-grid">
            <!-- Points Animation Tests -->
            <div class="test-section">
                <h2 class="test-section-title">âœ¨ ç§¯åˆ†åŠ¨ç”»æµ‹è¯•</h2>
                
                <div class="current-stats">
                    <div class="stat-item">
                        <span class="stat-label">å½“å‰ç­‰çº§</span>
                        <span class="stat-value" id="currentLevel">3çº§ - ä¸­çº§å¾‹å¸ˆ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">å½“å‰ç§¯åˆ†</span>
                        <span class="stat-value" id="currentPoints">3,250</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ä¼šå‘˜å€æ•°</span>
                        <span class="stat-value" id="currentMultiplier">2x</span>
                    </div>
                </div>
                
                <div class="test-buttons">
                    <button class="test-button success" onclick="testPointsAnimation(200, 'case_complete_success')">
                        <div data-icon="check-circle" style="width: 16px; height: 16px;"></div>
                        å®Œæˆæ¡ˆä»¶ (+200)
                    </button>
                    
                    <button class="test-button success" onclick="testPointsAnimation(200, 'review_5star')">
                        <div data-icon="star" style="width: 16px; height: 16px;"></div>
                        äº”æ˜Ÿå¥½è¯„ (+200)
                    </button>
                    
                    <button class="test-button primary" onclick="testPointsAnimation(20, 'online_hour')">
                        <div data-icon="clock" style="width: 16px; height: 16px;"></div>
                        åœ¨çº¿å¥–åŠ± (+20)
                    </button>
                    
                    <button class="test-button warning" onclick="testPointsAnimation(100, 'payment_100yuan')">
                        <div data-icon="currency-dollar" style="width: 16px; height: 16px;"></div>
                        å……å€¼å¥–åŠ± (+100)
                    </button>
                    
                    <button class="test-button error" onclick="testPointsAnimation(-150, 'case_declined')">
                        <div data-icon="x-circle" style="width: 16px; height: 16px;"></div>
                        æ‹’ç»æ¡ˆä»¶ (-150)
                    </button>
                    
                    <button class="test-button primary" onclick="testCustomPoints()">
                        <div data-icon="cog-6-tooth" style="width: 16px; height: 16px;"></div>
                        è‡ªå®šä¹‰ç§¯åˆ†
                    </button>
                </div>
            </div>
            
            <!-- Level Up Tests -->
            <div class="test-section">
                <h2 class="test-section-title">ğŸ‰ å‡çº§åº†ç¥æµ‹è¯•</h2>
                
                <div class="test-buttons">
                    <button class="test-button success" onclick="testLevelUp(2)">
                        <div data-icon="trophy" style="width: 16px; height: 16px;"></div>
                        å‡çº§åˆ°2çº§
                    </button>
                    
                    <button class="test-button success" onclick="testLevelUp(3)">
                        <div data-icon="trophy" style="width: 16px; height: 16px;"></div>
                        å‡çº§åˆ°3çº§
                    </button>
                    
                    <button class="test-button success" onclick="testLevelUp(5)">
                        <div data-icon="trophy" style="width: 16px; height: 16px;"></div>
                        å‡çº§åˆ°5çº§
                    </button>
                    
                    <button class="test-button success" onclick="testLevelUp(7)">
                        <div data-icon="trophy" style="width: 16px; height: 16px;"></div>
                        å‡çº§åˆ°7çº§
                    </button>
                    
                    <button class="test-button success" onclick="testLevelUp(10)">
                        <div data-icon="trophy" style="width: 16px; height: 16px;"></div>
                        å‡çº§åˆ°10çº§
                    </button>
                    
                    <button class="test-button warning" onclick="testCustomLevelUp()">
                        <div data-icon="star" style="width: 16px; height: 16px;"></div>
                        è‡ªå®šä¹‰å‡çº§
                    </button>
                </div>
                
                <div style="margin-top: var(--space-4);">
                    <h3 style="font-size: var(--text-lg); font-weight: var(--font-semibold); margin-bottom: var(--space-3);">
                        ç‰¹æ•ˆæµ‹è¯•
                    </h3>
                    <div class="test-buttons">
                        <button class="test-button primary" onclick="testScreenShake()">
                            <div data-icon="bolt" style="width: 16px; height: 16px;"></div>
                            å±å¹•éœ‡åŠ¨
                        </button>
                        
                        <button class="test-button warning" onclick="testScreenFlash()">
                            <div data-icon="sun" style="width: 16px; height: 16px;"></div>
                            å±å¹•é—ªå…‰
                        </button>
                        
                        <button class="test-button success" onclick="testCelebrationSound()">
                            <div data-icon="speaker-wave" style="width: 16px; height: 16px;"></div>
                            åº†ç¥éŸ³æ•ˆ
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Gamification Display -->
        <div class="test-grid">
            <!-- Lawyer Level Card -->
            <div class="lawyer-level-card">
                <div class="level-badge level-3">
                    <div data-icon="trophy" class="level-icon"></div>
                    <span class="level-text">ä¸­çº§å¾‹å¸ˆ (3çº§)</span>
                </div>
                
                <div class="points-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%;"></div>
                    </div>
                    <div class="progress-text">
                        <span class="progress-current">3,250</span>
                        <span>/ 5,000</span>
                    </div>
                </div>
                
                <div class="membership-multiplier">
                    <div data-icon="star" class="multiplier-icon"></div>
                    <span>2x ç§¯åˆ†å€æ•°</span>
                </div>
            </div>
            
            <!-- Enhanced Gamification System -->
            <div class="lawyer-level-system">
                <!-- This will be populated by the enhanced gamification system -->
            </div>
        </div>
        
        <!-- Reset Controls -->
        <div class="demo-controls">
            <h2 class="test-section-title">ğŸ”„ é‡ç½®æ§åˆ¶</h2>
            <div class="test-buttons">
                <button class="test-button primary" onclick="resetToLevel(1, 0)">
                    <div data-icon="arrow-path" style="width: 16px; height: 16px;"></div>
                    é‡ç½®åˆ°1çº§
                </button>
                
                <button class="test-button primary" onclick="resetToLevel(3, 3250)">
                    <div data-icon="arrow-path" style="width: 16px; height: 16px;"></div>
                    é‡ç½®åˆ°3çº§
                </button>
                
                <button class="test-button primary" onclick="resetToLevel(5, 10000)">
                    <div data-icon="arrow-path" style="width: 16px; height: 16px;"></div>
                    é‡ç½®åˆ°5çº§
                </button>
                
                <button class="test-button warning" onclick="setMembershipMultiplier()">
                    <div data-icon="star" style="width: 16px; height: 16px;"></div>
                    è®¾ç½®ä¼šå‘˜å€æ•°
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container"></div>
    
    <script>
        // Test functions
        function testPointsAnimation(points, action) {
            const multiplier = parseInt(document.getElementById('multiplier').value);
            
            if (window.gamificationSystem) {
                window.gamificationSystem.addPoints(points, action, multiplier);
            }
            
            updateCurrentStats();
        }
        
        function testCustomPoints() {
            const points = parseInt(document.getElementById('customPoints').value);
            const action = document.getElementById('actionType').value;
            const multiplier = parseInt(document.getElementById('multiplier').value);
            
            testPointsAnimation(points, action);
        }
        
        function testLevelUp(level) {
            const levelNames = {
                1: 'è§ä¹ å¾‹å¸ˆ',
                2: 'åˆçº§å¾‹å¸ˆ',
                3: 'ä¸­çº§å¾‹å¸ˆ',
                4: 'é«˜çº§å¾‹å¸ˆ',
                5: 'èµ„æ·±å¾‹å¸ˆ',
                6: 'ä¸“å®¶å¾‹å¸ˆ',
                7: 'é¦–å¸­å¾‹å¸ˆ',
                8: 'åˆä¼™äººå¾‹å¸ˆ',
                9: 'é«˜çº§åˆä¼™äºº',
                10: 'é¦–å¸­åˆä¼™äºº'
            };
            
            if (window.gamificationSystem) {
                window.gamificationSystem.showLevelUpAnimation({
                    newLevel: level,
                    levelName: levelNames[level]
                });
            }
        }
        
        function testCustomLevelUp() {
            const level = parseInt(document.getElementById('targetLevel').value);
            testLevelUp(level);
        }
        
        function testScreenShake() {
            if (window.gamificationSystem) {
                window.gamificationSystem.addScreenShakeEffect();
            }
        }
        
        function testScreenFlash() {
            if (window.gamificationSystem) {
                window.gamificationSystem.addScreenFlashEffect();
            }
        }
        
        function testCelebrationSound() {
            if (window.gamificationSystem) {
                window.gamificationSystem.playLevelUpCelebrationSound();
            }
        }
        
        function resetToLevel(level, points) {
            if (window.gamificationSystem) {
                window.gamificationSystem.setLevel(level, points);
            }
            updateCurrentStats();
        }
        
        function setMembershipMultiplier() {
            const multiplier = parseInt(document.getElementById('multiplier').value);
            if (window.gamificationSystem) {
                window.gamificationSystem.setMembershipMultiplier(multiplier);
            }
            updateCurrentStats();
        }
        
        function updateCurrentStats() {
            if (window.gamificationSystem) {
                const level = window.gamificationSystem.getCurrentLevel();
                const points = window.gamificationSystem.getCurrentPoints();
                const multiplier = window.gamificationSystem.membershipMultiplier;
                
                const levelNames = {
                    1: 'è§ä¹ å¾‹å¸ˆ',
                    2: 'åˆçº§å¾‹å¸ˆ',
                    3: 'ä¸­çº§å¾‹å¸ˆ',
                    4: 'é«˜çº§å¾‹å¸ˆ',
                    5: 'èµ„æ·±å¾‹å¸ˆ',
                    6: 'ä¸“å®¶å¾‹å¸ˆ',
                    7: 'é¦–å¸­å¾‹å¸ˆ',
                    8: 'åˆä¼™äººå¾‹å¸ˆ',
                    9: 'é«˜çº§åˆä¼™äºº',
                    10: 'é¦–å¸­åˆä¼™äºº'
                };
                
                document.getElementById('currentLevel').textContent = `${level}çº§ - ${levelNames[level]}`;
                document.getElementById('currentPoints').textContent = points.toLocaleString();
                document.getElementById('currentMultiplier').textContent = `${multiplier}x`;
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize enhanced gamification system
            if (window.EnhancedGamificationSystem) {
                // Set initial state
                window.EnhancedGamificationSystem.setLevel(3, 3250);
                window.EnhancedGamificationSystem.setMembershipMultiplier(2);
                
                // Render the enhanced system
                const container = document.querySelector('.lawyer-level-system');
                if (container) {
                    window.EnhancedGamificationSystem.renderLevelSystem(container);
                }
            }
            
            updateCurrentStats();
            
            // Add some demo points after a delay
            setTimeout(() => {
                if (window.gamificationSystem) {
                    window.gamificationSystem.addPoints(50, 'online_hour', 2);
                }
            }, 3000);
        });
        
        // Global function for sharing (called from celebration modal)
        window.shareAchievement = function(level, levelName) {
            if (window.gamificationSystem) {
                window.gamificationSystem.shareAchievement(level, levelName);
            }
        };
        
        // Global function for copying to clipboard
        window.copyToClipboard = function(text) {
            navigator.clipboard.writeText(text).then(() => {
                if (window.gamificationSystem) {
                    window.gamificationSystem.showToast('success', 'å¤åˆ¶æˆåŠŸ', 'å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                }
            });
        };
    </script>
</body>
</html>