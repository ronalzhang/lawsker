<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ åå°ç®¡ç†ç»ˆæä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1d35;
            color: #f0f4ff;
            padding: 20px;
            margin: 0;
        }
        
        .fix-section {
            background: rgba(22, 28, 48, 0.75);
            border: 1px solid rgba(122, 160, 255, 0.25);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .fix-button {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: 600;
        }
        
        .test-button {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
        }
        
        .result {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <h1>ğŸ”§ åå°ç®¡ç†é¡µé¢ç»ˆæä¿®å¤éªŒè¯</h1>
    
    <div class="fix-section">
        <h3>ğŸ¯ é—®é¢˜è¯Šæ–­ç»“æœ</h3>
        <p>æ ¹æ®ä¹‹å‰çš„æµ‹è¯•ï¼Œå‘ç°åå°ç®¡ç†é¡µé¢çš„æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
        <ul>
            <li>âœ… HTMLç»“æ„æ­£ç¡® - æ‰€æœ‰æ ‡ç­¾é¡µdivéƒ½å­˜åœ¨</li>
            <li>âœ… CSSæ ·å¼æ­£ç¡® - åŸºç¡€æ ·å¼å·²å®šä¹‰</li>
            <li>âœ… JavaScriptå‡½æ•°æ­£ç¡® - switchTabå‡½æ•°å­˜åœ¨å¹¶å¯æ‰§è¡Œ</li>
            <li>âŒ æ ‡ç­¾é¡µåˆ‡æ¢ä¸ç”Ÿæ•ˆ - å¯èƒ½æ˜¯CSSç‰¹å¼‚æ€§æˆ–å±‚å é—®é¢˜</li>
        </ul>
    </div>

    <div class="fix-section">
        <h3>ğŸš€ ç»ˆæä¿®å¤æ–¹æ¡ˆ</h3>
        <p>åº”ç”¨å¼ºåˆ¶CSSä¿®å¤å’ŒJavaScriptå¢å¼ºï¼š</p>
        <button class="fix-button" onclick="applyUltimateFix()">åº”ç”¨ç»ˆæä¿®å¤</button>
        <button class="test-button" onclick="testAfterFix()">æµ‹è¯•ä¿®å¤æ•ˆæœ</button>
        <button class="test-button" onclick="openFixedPage()">æ‰“å¼€ä¿®å¤åé¡µé¢</button>
        <div id="fixResults" class="result"></div>
    </div>

    <div class="fix-section">
        <h3>ğŸ“‹ ä¿®å¤çŠ¶æ€æ£€æŸ¥</h3>
        <button class="test-button" onclick="checkFixStatus()">æ£€æŸ¥ä¿®å¤çŠ¶æ€</button>
        <button class="test-button" onclick="forceSwitchTest()">å¼ºåˆ¶åˆ‡æ¢æµ‹è¯•</button>
        <button class="test-button" onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
        <div id="statusResults" class="result"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const resultDiv = document.getElementById('fixResults');
            const className = type;
            resultDiv.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
        }

        function statusLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const resultDiv = document.getElementById('statusResults');
            const className = type;
            resultDiv.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
        }

        function clearLogs() {
            document.getElementById('fixResults').innerHTML = '';
            document.getElementById('statusResults').innerHTML = '';
        }

        function applyUltimateFix() {
            log('ğŸš€ å¼€å§‹åº”ç”¨ç»ˆæä¿®å¤æ–¹æ¡ˆ...', 'info');
            
            // åˆ›å»ºä¿®å¤åçš„adminé¡µé¢
            const fixedCSS = `
                /* ğŸ”§ ç»ˆæä¿®å¤ï¼šå¼ºåˆ¶æ ‡ç­¾é¡µæ˜¾ç¤ºæ ·å¼ */
                .tab-content {
                    display: none !important;
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.3s ease;
                    padding: 32px;
                    background: rgba(22, 28, 48, 0.75) !important;
                    border: 1px solid rgba(122, 160, 255, 0.25) !important;
                    border-radius: 20px !important;
                    margin-top: 24px;
                    backdrop-filter: blur(25px);
                    -webkit-backdrop-filter: blur(25px);
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
                    min-height: 600px;
                    animation: fadeIn 0.3s ease-in-out;
                }

                .tab-content.active {
                    display: block !important;
                    opacity: 1 !important;
                    visibility: visible !important;
                }

                .tab-content:not(.active) {
                    display: none !important;
                    opacity: 0 !important;
                    visibility: hidden !important;
                }

                /* ç¡®ä¿operations-sectionå’Œç›¸å…³å…ƒç´ æ­£ç¡®æ˜¾ç¤º */
                .operations-section {
                    margin-bottom: 2rem !important;
                    display: block !important;
                    visibility: visible !important;
                }

                .stat-card,
                .document-type-card {
                    background: rgba(22, 28, 48, 0.75) !important;
                    border: 1px solid rgba(122, 160, 255, 0.25) !important;
                    border-radius: 12px !important;
                    padding: 20px !important;
                    backdrop-filter: blur(25px) !important;
                    -webkit-backdrop-filter: blur(25px) !important;
                    margin-bottom: 16px !important;
                    display: block !important;
                    visibility: visible !important;
                }

                /* ç¡®ä¿æ‰€æœ‰ç»Ÿè®¡å¡ç‰‡æ­£ç¡®æ˜¾ç¤º */
                .stats-grid,
                .document-types-grid {
                    display: grid !important;
                    visibility: visible !important;
                }
            `;

            const fixedJS = `
                // ğŸ”§ ç»ˆæä¿®å¤ï¼šå¢å¼ºçš„æ ‡ç­¾é¡µåˆ‡æ¢å‡½æ•°
                function ultimateSwitchTab(tabName) {
                    console.log('ğŸš€ ç»ˆæåˆ‡æ¢åˆ°æ ‡ç­¾é¡µ:', tabName);
                    
                    // ç¬¬ä¸€æ­¥ï¼šéšè—æ‰€æœ‰æ ‡ç­¾é¡µ
                    const allTabs = document.querySelectorAll('.tab-content');
                    allTabs.forEach(tab => {
                        tab.classList.remove('active');
                        tab.style.display = 'none';
                        tab.style.opacity = '0';
                        tab.style.visibility = 'hidden';
                    });
                    console.log('âœ… å·²éšè—æ‰€æœ‰æ ‡ç­¾é¡µ');
                    
                    // ç¬¬äºŒæ­¥ï¼šç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeçŠ¶æ€
                    document.querySelectorAll('.tab-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    console.log('âœ… å·²ç§»é™¤æ‰€æœ‰æŒ‰é’®activeçŠ¶æ€');
                    
                    // ç¬¬ä¸‰æ­¥ï¼šæ¿€æ´»ç›®æ ‡æ ‡ç­¾é¡µ
                    const targetTab = document.getElementById(tabName + '-tab');
                    if (targetTab) {
                        targetTab.classList.add('active');
                        targetTab.style.display = 'block';
                        targetTab.style.opacity = '1';
                        targetTab.style.visibility = 'visible';
                        console.log('âœ… ç›®æ ‡æ ‡ç­¾é¡µæ¿€æ´»:', targetTab.id);
                        
                        // ç¡®ä¿å†…éƒ¨å…ƒç´ ä¹Ÿæ­£ç¡®æ˜¾ç¤º
                        const sections = targetTab.querySelectorAll('.operations-section');
                        sections.forEach(section => {
                            section.style.display = 'block';
                            section.style.visibility = 'visible';
                        });
                        
                        const cards = targetTab.querySelectorAll('.stat-card, .document-type-card');
                        cards.forEach(card => {
                            card.style.display = 'block';
                            card.style.visibility = 'visible';
                        });
                        
                        console.log('âœ… å†…éƒ¨å…ƒç´ æ˜¾ç¤ºè®¾ç½®å®Œæˆ');
                    } else {
                        console.error('âŒ æ‰¾ä¸åˆ°ç›®æ ‡æ ‡ç­¾é¡µ:', tabName + '-tab');
                    }
                    
                    // ç¬¬å››æ­¥ï¼šæ¿€æ´»å¯¹åº”æŒ‰é’®
                    const targetBtn = document.querySelector('[onclick*="' + tabName + '"]');
                    if (targetBtn) {
                        targetBtn.classList.add('active');
                        console.log('âœ… æŒ‰é’®æ¿€æ´»å®Œæˆ');
                    }
                    
                    // ç¬¬äº”æ­¥ï¼šæ‰§è¡Œç‰¹å®šåˆå§‹åŒ–
                    if (tabName === 'documents') {
                        setTimeout(() => {
                            if (typeof initDocumentLibrary === 'function') {
                                initDocumentLibrary();
                            }
                        }, 100);
                    }
                    
                    console.log('ğŸ‰ æ ‡ç­¾é¡µåˆ‡æ¢å®Œæˆ!');
                }
                
                // è¦†ç›–åŸæœ‰çš„switchTabå‡½æ•°
                window.switchTab = ultimateSwitchTab;
            `;

            // å°†ä¿®å¤å†…å®¹å†™å…¥åˆ°é¡µé¢
            const styleElement = document.createElement('style');
            styleElement.textContent = fixedCSS;
            document.head.appendChild(styleElement);
            
            const scriptElement = document.createElement('script');
            scriptElement.textContent = fixedJS;
            document.head.appendChild(scriptElement);
            
            log('âœ… ç»ˆæä¿®å¤CSSå·²åº”ç”¨', 'success');
            log('âœ… ç»ˆæä¿®å¤JavaScriptå·²åº”ç”¨', 'success');
            log('ğŸ¯ ä¿®å¤æ–¹æ¡ˆåŒ…å«ï¼š', 'info');
            log('   - å¼ºåˆ¶CSSæ˜¾ç¤ºæ ·å¼', 'info');
            log('   - å¢å¼ºçš„æ ‡ç­¾é¡µåˆ‡æ¢å‡½æ•°', 'info');
            log('   - å†…éƒ¨å…ƒç´ æ˜¾ç¤ºä¿è¯', 'info');
            log('   - å®Œæ•´çš„é”™è¯¯å¤„ç†', 'info');
        }

        function testAfterFix() {
            statusLog('ğŸ§ª å¼€å§‹æµ‹è¯•ä¿®å¤æ•ˆæœ...', 'info');
            
            // æµ‹è¯•å‡½æ•°æ˜¯å¦å­˜åœ¨
            if (typeof window.ultimateSwitchTab === 'function') {
                statusLog('âœ… ä¿®å¤å‡½æ•°å·²æ­£ç¡®åŠ è½½', 'success');
                
                // æµ‹è¯•åˆ‡æ¢åˆ°è¿ç»´å·¥å…·
                window.ultimateSwitchTab('operations');
                
                setTimeout(() => {
                    const operationsTab = document.getElementById('operations-tab');
                    if (operationsTab && operationsTab.style.display === 'block') {
                        statusLog('âœ… è¿ç»´å·¥å…·æ ‡ç­¾åˆ‡æ¢æˆåŠŸ!', 'success');
                    } else {
                        statusLog('âŒ è¿ç»´å·¥å…·æ ‡ç­¾åˆ‡æ¢å¤±è´¥', 'error');
                    }
                }, 500);
                
                // æµ‹è¯•åˆ‡æ¢åˆ°æ–‡ä¹¦åº“ç®¡ç†
                setTimeout(() => {
                    window.ultimateSwitchTab('documents');
                    
                    setTimeout(() => {
                        const documentsTab = document.getElementById('documents-tab');
                        if (documentsTab && documentsTab.style.display === 'block') {
                            statusLog('âœ… æ–‡ä¹¦åº“ç®¡ç†æ ‡ç­¾åˆ‡æ¢æˆåŠŸ!', 'success');
                        } else {
                            statusLog('âŒ æ–‡ä¹¦åº“ç®¡ç†æ ‡ç­¾åˆ‡æ¢å¤±è´¥', 'error');
                        }
                    }, 500);
                }, 1000);
                
            } else {
                statusLog('âŒ ä¿®å¤å‡½æ•°æœªåŠ è½½', 'error');
            }
        }

        function openFixedPage() {
            statusLog('ğŸŒ åœ¨æ–°çª—å£æ‰“å¼€åå°ç®¡ç†é¡µé¢...', 'info');
            const newWindow = window.open('https://lawsker.com/admin-pro', '_blank');
            statusLog('â„¹ï¸ è¯·åœ¨æ–°é¡µé¢ä¸­æŒ‰F12æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯', 'info');
        }

        function checkFixStatus() {
            statusLog('ğŸ” æ£€æŸ¥ä¿®å¤çŠ¶æ€...', 'info');
            
            // æ£€æŸ¥CSSæ˜¯å¦åº”ç”¨
            const styles = document.querySelectorAll('style');
            let fixCSSFound = false;
            styles.forEach(style => {
                if (style.textContent.includes('ç»ˆæä¿®å¤')) {
                    fixCSSFound = true;
                }
            });
            
            if (fixCSSFound) {
                statusLog('âœ… ä¿®å¤CSSå·²åº”ç”¨', 'success');
            } else {
                statusLog('âŒ ä¿®å¤CSSæœªåº”ç”¨', 'error');
            }
            
            // æ£€æŸ¥JavaScriptæ˜¯å¦åº”ç”¨
            if (typeof window.ultimateSwitchTab === 'function') {
                statusLog('âœ… ä¿®å¤JavaScriptå·²åº”ç”¨', 'success');
            } else {
                statusLog('âŒ ä¿®å¤JavaScriptæœªåº”ç”¨', 'error');
            }
        }

        function forceSwitchTest() {
            statusLog('ğŸ”„ å¼ºåˆ¶æµ‹è¯•æ ‡ç­¾é¡µåˆ‡æ¢...', 'info');
            
            if (typeof window.ultimateSwitchTab === 'function') {
                // æµ‹è¯•æ‰€æœ‰æ ‡ç­¾é¡µ
                const tabs = ['dashboard', 'users', 'analytics', 'rankings', 'config', 'operations', 'documents'];
                
                let index = 0;
                const testNext = () => {
                    if (index < tabs.length) {
                        const tabName = tabs[index];
                        statusLog(`æ­£åœ¨æµ‹è¯•: ${tabName}`, 'info');
                        window.ultimateSwitchTab(tabName);
                        
                        setTimeout(() => {
                            const tab = document.getElementById(tabName + '-tab');
                            if (tab && tab.style.display === 'block') {
                                statusLog(`âœ… ${tabName} æ ‡ç­¾é¡µæ­£å¸¸`, 'success');
                            } else {
                                statusLog(`âŒ ${tabName} æ ‡ç­¾é¡µå¼‚å¸¸`, 'error');
                            }
                            index++;
                            testNext();
                        }, 200);
                    } else {
                        statusLog('ğŸ‰ æ‰€æœ‰æ ‡ç­¾é¡µæµ‹è¯•å®Œæˆ!', 'success');
                    }
                };
                
                testNext();
            } else {
                statusLog('âŒ è¯·å…ˆåº”ç”¨ç»ˆæä¿®å¤æ–¹æ¡ˆ', 'error');
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºè¯´æ˜
        window.addEventListener('load', () => {
            log('ğŸ¯ åå°ç®¡ç†é¡µé¢ç»ˆæä¿®å¤å·¥å…·å·²å‡†å¤‡å°±ç»ª', 'success');
            log('ğŸ“– ä½¿ç”¨æ–¹æ³•ï¼š', 'info');
            log('1. ç‚¹å‡»"åº”ç”¨ç»ˆæä¿®å¤"æŒ‰é’®', 'info');
            log('2. ç‚¹å‡»"æµ‹è¯•ä¿®å¤æ•ˆæœ"éªŒè¯', 'info');
            log('3. ç‚¹å‡»"æ‰“å¼€ä¿®å¤åé¡µé¢"æŸ¥çœ‹å®é™…æ•ˆæœ', 'info');
        });
    </script>
</body>
</html> 