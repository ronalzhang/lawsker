<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简化标签页测试</title>
    <style>
        :root {
            --glass-bg: rgba(22, 28, 48, 0.75);
            --glass-border: rgba(122, 160, 255, 0.25);
            --text-primary: #f0f4ff;
            --text-secondary: #a8b2d1;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #0f1424;
            color: #f0f4ff;
            padding: 20px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            color: #a8b2d1;
            border: 1px solid rgba(122, 160, 255, 0.25);
            border-radius: 8px;
            cursor: pointer;
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            min-height: 200px;
        }
        
        .tab-content.active {
            display: block !important;
        }
        
        .operations-section {
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 20px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>🧪 标签页功能测试</h1>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('dashboard')">📊 数据概览</button>
        <button class="tab-btn" onclick="switchTab('operations')">🔧 运维工具</button>
        <button class="tab-btn" onclick="switchTab('documents')">📚 文书库管理</button>
    </div>

    <!-- 数据概览 -->
    <div class="tab-content active" id="dashboard-tab">
        <h3>📊 数据概览</h3>
        <p>这是数据概览页面的内容。</p>
        <div class="stat-card">
            <div>总用户数: <span id="totalUsers">1,234</span></div>
        </div>
    </div>

    <!-- 运维工具 -->
    <div class="tab-content" id="operations-tab">
        <div class="operations-section">
            <h3>🔧 运维工具</h3>
            <p>这是运维工具页面的内容。</p>
            <div class="stat-card">
                <div>系统状态: 正常运行</div>
                <div>服务器负载: 45%</div>
            </div>
        </div>
    </div>

    <!-- 文书库管理 -->
    <div class="tab-content" id="documents-tab">
        <div class="operations-section">
            <h3>📚 文书库管理</h3>
            <p>这是文书库管理页面的内容。</p>
            <div class="stat-card">
                <div>文书总数: <span id="totalDocuments">156</span></div>
                <div>今日使用: <span id="dailyUsage">28</span></div>
                <div>平均评分: <span id="averageRating">4.8</span></div>
                <div>命中率: <span id="hitRate">76%</span></div>
            </div>
        </div>
    </div>

    <div style="margin-top: 40px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
        <h3>🔍 测试结果</h3>
        <div id="testResults"></div>
        <button onclick="runTests()" style="padding: 10px 20px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px;">运行测试</button>
    </div>

    <script>
        function switchTab(tabName) {
            console.log('切换到标签页:', tabName);
            
            // 移除所有按钮的active状态
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 隐藏所有标签页内容
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // 激活选中的按钮
            const activeBtn = document.querySelector(`[onclick="switchTab('${tabName}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                console.log('按钮激活成功:', activeBtn);
            } else {
                console.error('找不到按钮:', tabName);
            }
            
            // 显示选中的标签页内容
            const activeContent = document.getElementById(`${tabName}-tab`);
            if (activeContent) {
                activeContent.classList.add('active');
                console.log('标签页显示成功:', activeContent);
                
                // 根据不同标签页执行特定的初始化
                switch (tabName) {
                    case 'documents':
                        console.log('🚀 初始化文书库管理');
                        loadDocumentStats();
                        break;
                    case 'operations':
                        console.log('🔧 初始化运维工具');
                        break;
                    default:
                        console.log('📊 显示数据概览');
                }
            } else {
                console.error('找不到标签页内容:', `${tabName}-tab`);
            }
        }

        function loadDocumentStats() {
            console.log('开始加载文书库统计数据');
            
            const stats = {
                totalDocuments: Math.floor(Math.random() * 200) + 100,
                dailyUsage: Math.floor(Math.random() * 50) + 20,
                averageRating: (Math.random() * 1 + 4).toFixed(1),
                hitRate: Math.floor(Math.random() * 30 + 60) + '%'
            };

            const updateElement = (id, value) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                    console.log(`✅ 已更新元素 ${id}: ${value}`);
                } else {
                    console.warn(`❌ 元素 ${id} 不存在`);
                }
            };

            updateElement('totalDocuments', stats.totalDocuments);
            updateElement('dailyUsage', stats.dailyUsage);
            updateElement('averageRating', stats.averageRating);
            updateElement('hitRate', stats.hitRate);
            
            console.log('✅ 文书库统计数据已更新:', stats);
        }

        function runTests() {
            const results = document.getElementById('testResults');
            results.innerHTML = '<h4>测试结果：</h4>';
            
            // 测试CSS变量
            const testElement = document.createElement('div');
            testElement.style.background = 'var(--glass-bg)';
            document.body.appendChild(testElement);
            const computedStyle = window.getComputedStyle(testElement);
            const bgColor = computedStyle.backgroundColor;
            document.body.removeChild(testElement);
            
            if (bgColor !== 'rgba(0, 0, 0, 0)') {
                results.innerHTML += '<div style="color: #10b981;">✅ CSS变量正常工作</div>';
            } else {
                results.innerHTML += '<div style="color: #ef4444;">❌ CSS变量未定义</div>';
            }
            
            // 测试DOM元素
            const elements = ['totalDocuments', 'dailyUsage', 'averageRating', 'hitRate'];
            let foundElements = 0;
            elements.forEach(id => {
                if (document.getElementById(id)) {
                    foundElements++;
                }
            });
            
            if (foundElements === elements.length) {
                results.innerHTML += '<div style="color: #10b981;">✅ 所有DOM元素存在</div>';
            } else {
                results.innerHTML += `<div style="color: #ef4444;">❌ 只找到 ${foundElements}/${elements.length} 个元素</div>`;
            }
            
            // 测试标签页切换
            const tabs = document.querySelectorAll('.tab-content');
            const activeTabs = document.querySelectorAll('.tab-content.active');
            
            if (activeTabs.length === 1) {
                results.innerHTML += '<div style="color: #10b981;">✅ 标签页切换正常</div>';
            } else {
                results.innerHTML += `<div style="color: #ef4444;">❌ 标签页切换异常: ${activeTabs.length} 个激活标签页</div>`;
            }
        }

        // 页面加载完成后自动运行测试
        window.addEventListener('load', () => {
            console.log('页面加载完成');
            setTimeout(runTests, 1000);
        });
    </script>
</body>
</html> 