<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾æ ‡å‡çº§ç³»ç»Ÿæµ‹è¯• - Lawsker</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”§</text></svg>">
    
    <!-- è®¾è®¡ç³»ç»Ÿæ ·å¼ -->
    <link rel="stylesheet" href="/css/design-system.css">
    <link rel="stylesheet" href="/css/components.css">
    
    <!-- å›¾æ ‡ç³»ç»Ÿ -->
    <script src="/js/icon-system.js"></script>
    <script src="/js/professional-icon-library.js"></script>
    <script src="/js/icon-upgrade-system.js"></script>
    
    <style>
        body {
            font-family: var(--font-family-sans);
            background: var(--bg-secondary);
            margin: 0;
            padding: 2rem;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
        }
        
        .title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }
        
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--primary-200);
            padding-bottom: 0.5rem;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .test-item {
            padding: 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            background: var(--gray-50);
        }
        
        .test-item h4 {
            margin: 0 0 1rem 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .emoji-test {
            font-size: 1.5rem;
            margin: 0.5rem 0;
        }
        
        .button-test {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .test-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }
        
        .test-btn:hover {
            background: var(--primary-50);
            border-color: var(--primary-300);
        }
        
        .icon-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .icon-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border: 1px solid var(--gray-200);
            border-radius: 4px;
            background: white;
            font-size: 0.875rem;
        }
        
        .stats-display {
            background: var(--primary-50);
            border: 1px solid var(--primary-200);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-600);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .code-example {
            background: var(--gray-900);
            color: var(--gray-100);
            padding: 1rem;
            border-radius: 6px;
            font-family: var(--font-family-mono);
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        .upgrade-log {
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            padding: 1rem;
            font-family: var(--font-family-mono);
            font-size: 0.75rem;
            max-height: 200px;
            overflow-y: auto;
            margin: 1rem 0;
        }
        
        .control-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .control-btn {
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--primary-600);
            border-radius: 6px;
            background: var(--primary-600);
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .control-btn:hover {
            background: var(--primary-700);
        }
        
        .control-btn.secondary {
            background: white;
            color: var(--primary-600);
        }
        
        .control-btn.secondary:hover {
            background: var(--primary-50);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="header">
            <h1 class="title">ğŸ”§ å›¾æ ‡å‡çº§ç³»ç»Ÿæµ‹è¯•</h1>
            <p class="subtitle">æµ‹è¯•ä¸“ä¸šå›¾æ ‡ç³»ç»Ÿçš„è‡ªåŠ¨å‡çº§åŠŸèƒ½å’Œæ•ˆæœ</p>
        </div>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <button class="control-btn" onclick="runUpgradeTest()">è¿è¡Œå‡çº§æµ‹è¯•</button>
            <button class="control-btn secondary" onclick="showStats()">æ˜¾ç¤ºç»Ÿè®¡</button>
            <button class="control-btn secondary" onclick="clearLog()">æ¸…é™¤æ—¥å¿—</button>
            <button class="control-btn secondary" onclick="addDynamicContent()">æ·»åŠ åŠ¨æ€å†…å®¹</button>
        </div>
        
        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="test-section">
            <h3 class="section-title">ç³»ç»Ÿç»Ÿè®¡</h3>
            <div class="stats-display">
                <div class="stats-grid" id="stats-grid">
                    <!-- ç»Ÿè®¡æ•°æ®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
        </div>
        
        <!-- Emojiå›¾æ ‡æµ‹è¯• -->
        <div class="test-section">
            <h3 class="section-title">Emoji å›¾æ ‡å‡çº§æµ‹è¯•</h3>
            <div class="test-grid">
                <div class="test-item">
                    <h4>ç”¨æˆ·ç›¸å…³</h4>
                    <div class="emoji-test">ğŸ‘¤ ç”¨æˆ· ğŸ‘¥ ç”¨æˆ·ç»„ ğŸ‘¨â€ğŸ’¼ å¾‹å¸ˆ</div>
                </div>
                
                <div class="test-item">
                    <h4>æ³•å¾‹ç›¸å…³</h4>
                    <div class="emoji-test">âš–ï¸ æ³•å¾‹ ğŸ“„ æ–‡æ¡£ ğŸ’¼ å…¬æ–‡åŒ…</div>
                </div>
                
                <div class="test-item">
                    <h4>é‡‘èæ”¯ä»˜</h4>
                    <div class="emoji-test">ğŸ’³ ä¿¡ç”¨å¡ ğŸ’° é‡‘é’± ğŸ’µ ç¾å…ƒ</div>
                </div>
                
                <div class="test-item">
                    <h4>æˆå°±æ¸¸æˆ</h4>
                    <div class="emoji-test">ğŸ† å¥–æ¯ â­ æ˜Ÿæ˜Ÿ ğŸ”¥ ç«ç„°</div>
                </div>
            </div>
        </div>
        
        <!-- æŒ‰é’®å›¾æ ‡æµ‹è¯• -->
        <div class="test-section">
            <h3 class="section-title">æŒ‰é’®å›¾æ ‡æµ‹è¯•</h3>
            <div class="test-grid">
                <div class="test-item">
                    <h4>å¯¼èˆªæŒ‰é’®</h4>
                    <div class="button-test">
                        <button class="test-btn">ğŸ  é¦–é¡µ</button>
                        <button class="test-btn">âš™ï¸ è®¾ç½®</button>
                        <button class="test-btn">ğŸ”” é€šçŸ¥</button>
                        <button class="test-btn">ğŸ“Š ç»Ÿè®¡</button>
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>æ“ä½œæŒ‰é’®</h4>
                    <div class="button-test">
                        <button class="test-btn">â• æ·»åŠ </button>
                        <button class="test-btn">â– åˆ é™¤</button>
                        <button class="test-btn">âœ… ç¡®è®¤</button>
                        <button class="test-btn">âŒ å–æ¶ˆ</button>
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>ä¸šåŠ¡æŒ‰é’®</h4>
                    <div class="button-test">
                        <button class="test-btn">âš–ï¸ æ³•å¾‹æœåŠ¡</button>
                        <button class="test-btn">ğŸ’³ æ”¯ä»˜ç®¡ç†</button>
                        <button class="test-btn">ğŸ† æˆå°±ä¸­å¿ƒ</button>
                        <button class="test-btn">ğŸ“§ æ¶ˆæ¯ä¸­å¿ƒ</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Dataå±æ€§å›¾æ ‡æµ‹è¯• -->
        <div class="test-section">
            <h3 class="section-title">Data å±æ€§å›¾æ ‡æµ‹è¯•</h3>
            <div class="test-grid">
                <div class="test-item">
                    <h4>åŸºç¡€å›¾æ ‡</h4>
                    <div class="icon-list">
                        <div class="icon-item">
                            <span data-icon="user" data-icon-size="20"></span>
                            ç”¨æˆ·
                        </div>
                        <div class="icon-item">
                            <span data-icon="scale" data-icon-size="20"></span>
                            æ³•å¾‹
                        </div>
                        <div class="icon-item">
                            <span data-icon="trophy" data-icon-size="20"></span>
                            æˆå°±
                        </div>
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>æ‰©å±•å›¾æ ‡</h4>
                    <div class="icon-list">
                        <div class="icon-item">
                            <span data-icon="gavel" data-icon-size="20"></span>
                            æ³•æ§Œ
                        </div>
                        <div class="icon-item">
                            <span data-icon="analytics" data-icon-size="20"></span>
                            åˆ†æ
                        </div>
                        <div class="icon-item">
                            <span data-icon="workflow" data-icon-size="20"></span>
                            æµç¨‹
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸Šä¸‹æ–‡å›¾æ ‡æµ‹è¯• -->
        <div class="test-section">
            <h3 class="section-title">ä¸Šä¸‹æ–‡æ™ºèƒ½å›¾æ ‡æµ‹è¯•</h3>
            <div class="test-grid">
                <div class="test-item">
                    <h4>ç™»å½•ç›¸å…³</h4>
                    <div class="button-test">
                        <button class="test-btn">login</button>
                        <button class="test-btn">register</button>
                        <button class="test-btn">profile</button>
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>ä¸šåŠ¡ç›¸å…³</h4>
                    <div class="button-test">
                        <button class="test-btn">lawyer</button>
                        <button class="test-btn">case</button>
                        <button class="test-btn">payment</button>
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>çŠ¶æ€ç›¸å…³</h4>
                    <div class="button-test">
                        <button class="test-btn">success</button>
                        <button class="test-btn">error</button>
                        <button class="test-btn">warning</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å‡çº§æ—¥å¿— -->
        <div class="test-section">
            <h3 class="section-title">å‡çº§æ—¥å¿—</h3>
            <div class="upgrade-log" id="upgrade-log">
                ç­‰å¾…å‡çº§æµ‹è¯•...
            </div>
        </div>
        
        <!-- ä½¿ç”¨ç¤ºä¾‹ -->
        <div class="test-section">
            <h3 class="section-title">ä»£ç ç¤ºä¾‹</h3>
            <div class="code-example">
// æ‰‹åŠ¨å‡çº§å…ƒç´ 
window.IconUpgradeSystem.upgradeElement(document.querySelector('.my-element'));

// è·å–å‡çº§ç»Ÿè®¡
const stats = window.IconUpgradeSystem.getUpgradeStats();
console.log('å·²å‡çº§å›¾æ ‡æ•°é‡:', stats.totalUpgraded);

// æœç´¢å›¾æ ‡
const results = window.ProfessionalIconLibrary.searchIcons('legal');

// æŒ‰åˆ†ç±»è·å–å›¾æ ‡
const legalIcons = window.ProfessionalIconLibrary.getIconsByCategory('legal');

// åˆ›å»ºå›¾æ ‡é€‰æ‹©å™¨
window.ProfessionalIconLibrary.createIconPicker(container, {
  onSelect: (iconName, iconSvg) => {
    console.log('é€‰æ‹©äº†å›¾æ ‡:', iconName);
  }
});
            </div>
        </div>
    </div>

    <script>
        let logContainer;
        
        document.addEventListener('DOMContentLoaded', function() {
            logContainer = document.getElementById('upgrade-log');
            
            // åˆå§‹åŒ–ç»Ÿè®¡æ˜¾ç¤º
            setTimeout(() => {
                showStats();
                logMessage('âœ… å›¾æ ‡ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
            }, 500);
            
            // ç›‘å¬å‡çº§äº‹ä»¶
            if (window.IconUpgradeSystem) {
                const originalPerformUpgrade = window.IconUpgradeSystem.performUpgrade;
                window.IconUpgradeSystem.performUpgrade = function() {
                    logMessage('ğŸ”„ å¼€å§‹æ‰§è¡Œå›¾æ ‡å‡çº§...');
                    const result = originalPerformUpgrade.call(this);
                    const stats = this.getUpgradeStats();
                    logMessage(`âœ… å‡çº§å®Œæˆï¼Œå…±å‡çº§ ${stats.totalUpgraded} ä¸ªå›¾æ ‡`);
                    showStats();
                    return result;
                };
            }
        });
        
        function logMessage(message) {
            if (logContainer) {
                const timestamp = new Date().toLocaleTimeString();
                logContainer.innerHTML += `[${timestamp}] ${message}\n`;
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        }
        
        function runUpgradeTest() {
            logMessage('ğŸš€ å¼€å§‹è¿è¡Œå‡çº§æµ‹è¯•...');
            
            if (window.IconUpgradeSystem) {
                window.IconUpgradeSystem.performUpgrade();
            } else {
                logMessage('âŒ IconUpgradeSystem æœªæ‰¾åˆ°');
            }
        }
        
        function showStats() {
            const statsGrid = document.getElementById('stats-grid');
            if (!statsGrid) return;
            
            let stats = {};
            
            // è·å–å›¾æ ‡ç³»ç»Ÿç»Ÿè®¡
            if (window.IconSystem) {
                stats.totalIcons = window.IconSystem.getAvailableIcons().length;
            }
            
            // è·å–ä¸“ä¸šå›¾æ ‡åº“ç»Ÿè®¡
            if (window.ProfessionalIconLibrary) {
                const libStats = window.ProfessionalIconLibrary.getStats();
                Object.assign(stats, libStats);
            }
            
            // è·å–å‡çº§ç³»ç»Ÿç»Ÿè®¡
            if (window.IconUpgradeSystem) {
                const upgradeStats = window.IconUpgradeSystem.getUpgradeStats();
                Object.assign(stats, upgradeStats);
            }
            
            // æ˜¾ç¤ºç»Ÿè®¡
            statsGrid.innerHTML = Object.entries(stats).map(([key, value]) => `
                <div class="stat-item">
                    <div class="stat-number">${value}</div>
                    <div class="stat-label">${getStatLabel(key)}</div>
                </div>
            `).join('');
            
            logMessage(`ğŸ“Š ç»Ÿè®¡æ›´æ–°: ${JSON.stringify(stats)}`);
        }
        
        function getStatLabel(key) {
            const labels = {
                totalIcons: 'æ€»å›¾æ ‡æ•°',
                extendedIcons: 'æ‰©å±•å›¾æ ‡',
                categories: 'åˆ†ç±»æ•°é‡',
                categorizedIcons: 'å·²åˆ†ç±»å›¾æ ‡',
                totalUpgraded: 'å·²å‡çº§å›¾æ ‡',
                availableIcons: 'å¯ç”¨å›¾æ ‡',
                mappings: 'æ˜ å°„è§„åˆ™'
            };
            return labels[key] || key;
        }
        
        function clearLog() {
            if (logContainer) {
                logContainer.innerHTML = '';
                logMessage('ğŸ§¹ æ—¥å¿—å·²æ¸…é™¤');
            }
        }
        
        function addDynamicContent() {
            logMessage('â• æ·»åŠ åŠ¨æ€å†…å®¹æµ‹è¯•...');
            
            const container = document.querySelector('.test-section:last-of-type');
            const dynamicDiv = document.createElement('div');
            dynamicDiv.className = 'test-item';
            dynamicDiv.innerHTML = `
                <h4>åŠ¨æ€æ·»åŠ çš„å†…å®¹</h4>
                <div class="button-test">
                    <button class="test-btn">ğŸ†• æ–°æŒ‰é’®</button>
                    <button class="test-btn">ğŸ“± ç§»åŠ¨ç«¯</button>
                    <button class="test-btn">ğŸ’» æ¡Œé¢ç«¯</button>
                </div>
                <div class="icon-list">
                    <div class="icon-item">
                        <span data-icon="smartphone" data-icon-size="20"></span>
                        æ‰‹æœº
                    </div>
                    <div class="icon-item">
                        <span data-icon="computer-desktop" data-icon-size="20"></span>
                        ç”µè„‘
                    </div>
                </div>
            `;
            
            container.appendChild(dynamicDiv);
            
            // æ‰‹åŠ¨å‡çº§æ–°æ·»åŠ çš„å†…å®¹
            if (window.IconUpgradeSystem) {
                window.IconUpgradeSystem.upgradeElement(dynamicDiv);
            }
            
            logMessage('âœ… åŠ¨æ€å†…å®¹æ·»åŠ å®Œæˆå¹¶å·²å‡çº§');
        }
        
        // æµ‹è¯•å›¾æ ‡é€‰æ‹©å™¨
        function showIconPicker() {
            const pickerContainer = document.createElement('div');
            pickerContainer.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 1000;
                background: white;
                border-radius: 12px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                padding: 20px;
                max-width: 90vw;
                max-height: 90vh;
            `;
            
            document.body.appendChild(pickerContainer);
            
            if (window.ProfessionalIconLibrary) {
                window.ProfessionalIconLibrary.createIconPicker(pickerContainer, {
                    onSelect: (iconName, iconSvg) => {
                        logMessage(`ğŸ¯ é€‰æ‹©äº†å›¾æ ‡: ${iconName}`);
                        document.body.removeChild(pickerContainer);
                    }
                });
            }
            
            // æ·»åŠ å…³é—­æŒ‰é’®
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'å…³é—­';
            closeBtn.style.cssText = 'position: absolute; top: 10px; right: 10px; padding: 5px 10px;';
            closeBtn.onclick = () => document.body.removeChild(pickerContainer);
            pickerContainer.appendChild(closeBtn);
        }
    </script>
</body>
</html>