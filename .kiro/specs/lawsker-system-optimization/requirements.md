# Lawsker业务优化系统需求文档

## 项目概述

基于Lawsker (律客) 法律服务平台的业务优化方案，实现统一认证系统、律师免费引流模式、传奇游戏式积分系统、用户Credits控制和企业服务数据导向等核心功能，打造"不雇佣一个律师的巨型律师事务所"。

## 需求背景

### 当前系统状态
- **后端API**: 95%完成度，基于FastAPI的42张表结构完整
- **前端界面**: 90%完成度，原生HTML/CSS/JS实现
- **认证系统**: 基础认证完成，但缺乏统一认证和律师证认证
- **会员系统**: 基础框架存在，需要重构为免费引流模式
- **积分系统**: 简单积分机制，需要升级为传奇游戏式指数级积分
- **企业服务**: 基础功能完成，需要数据导向优化

### 核心业务问题
1. **认证系统分散**: 用户和律师注册流程不统一，缺乏演示账户
2. **律师引流困难**: 缺乏免费版吸引律师注册的机制
3. **积分系统简单**: 无法激励律师活跃和付费升级
4. **批量任务滥用**: 缺乏Credits控制机制防止垃圾上传
5. **企业服务承诺风险**: 承诺成功率存在法律风险
6. **派单机制不合理**: 缺乏律师拒绝案件的惩罚机制

## 功能需求

### 需求1：统一认证系统重构

**用户故事**: 作为平台用户，我希望有统一的注册登录体验，包括邮箱验证、律师证认证和演示账户功能，以便安全便捷地使用平台服务。

#### 验收标准
1. WHEN 用户注册 THEN 系统应提供统一的邮箱验证注册流程，不区分用户类型
2. WHEN 用户验证邮箱后 THEN 系统应允许选择身份类型（普通用户/律师用户）
3. WHEN 律师用户选择身份 THEN 系统应要求上传律师证并进入认证流程
4. WHEN 用户登录成功 THEN 系统应根据身份自动重定向到对应工作台
5. WHEN 访客访问 THEN 系统应提供演示账户选项，无需注册即可体验功能
6. IF 用户使用演示账户 THEN 系统应使用安全的演示数据，与真实数据隔离
7. WHEN 律师证认证通过 THEN 系统应自动分配基础版免费会员资格

### 需求2：律师会员订阅系统（免费引流模式）

**用户故事**: 作为律师用户，我希望能够免费使用基础功能，并根据需要升级到付费版本，以获得更多权益和积分倍数。

#### 验收标准
1. WHEN 律师认证通过 THEN 系统应自动分配基础版免费会员（20个AI credits/月，2个案件/天）
2. WHEN 律师需要更多功能 THEN 系统应提供专业版（899元/月）和企业版（2999元/月）升级选项
3. WHEN 律师升级付费会员 THEN 系统应提供对应的积分倍数（专业版2倍，企业版3倍）
4. WHEN 律师使用AI工具 THEN 系统应从会员包含的credits中扣除
5. WHEN 律师会员到期 THEN 系统应自动降级到基础版，保持基本功能可用
6. IF 律师达到对应等级 THEN 系统应推荐匹配的会员套餐

### 需求3：传奇游戏式律师积分系统

**用户故事**: 作为律师用户，我希望通过完成案件、获得好评等行为获得积分，并享受付费会员的积分倍数加成，通过积分累积提升律师等级。

#### 验收标准
1. WHEN 律师完成案件 THEN 系统应根据案件质量和客户评价给予100-300积分
2. WHEN 律师获得5星好评 THEN 系统应给予200积分奖励
3. WHEN 律师获得1-2星差评 THEN 系统应扣除150-300积分
4. WHEN 律师在线工作 THEN 系统应按小时给予5积分/小时的活跃奖励
5. WHEN 律师使用AI工具 THEN 系统应给予3积分/credit的使用奖励
6. WHEN 律师付费充值 THEN 系统应给予100积分/100元的付费奖励
7. IF 律师是付费会员 THEN 所有积分应按会员倍数（2倍或3倍）计算
8. WHEN 律师积分达到升级要求 THEN 系统应自动提升律师等级（1-10级）
9. WHEN 律师等级提升 THEN 系统应解锁对应的权益和特权

### 需求4：律师拒绝案件惩罚机制

**用户故事**: 作为平台管理员，我希望律师合理接受派发的案件，对频繁拒绝案件的律师实施积分惩罚和派单限制。

#### 验收标准
1. WHEN 律师拒绝案件 THEN 系统应扣除30-60积分（根据案件价值和律师等级调整）
2. WHEN 律师连续拒绝案件 THEN 每次拒绝的惩罚积分应递增
3. WHEN 律师7天内拒绝5次案件 THEN 系统应暂停其派单24小时
4. WHEN 律师拒绝案件 THEN 系统应降低其后续派单优先级
5. WHEN 律师被暂停派单 THEN 系统应发送通知说明原因和恢复时间
6. IF 律师等级较高 THEN 拒绝案件的惩罚应更重

### 需求5：用户Credits支付控制系统

**用户故事**: 作为普通用户，我希望能够使用每周免费的1个credit进行批量任务上传，或购买额外credits作为平台资源支付手段，防止平台被滥用。

#### 验收标准
1. WHEN 用户注册成功 THEN 系统应分配1个免费credit作为平台资源使用额度
2. WHEN 每周重置时 THEN 系统应自动为所有用户重置为1个credit
3. WHEN 用户进行批量上传 THEN 系统应消耗1个credit，无论上传多少条记录
4. WHEN 用户credits不足 THEN 系统应提示购买credits（50元/个）作为平台资源支付
5. WHEN 用户购买credits THEN 系统应通过支付接口处理并增加用户credits余额
6. WHEN 用户发布单一任务 THEN 系统应要求直接支付，不消耗credits
7. WHEN 用户使用平台付费功能 THEN 系统应优先使用credits余额支付
8. IF 用户尝试批量上传但credits不足 THEN 系统应阻止操作并提示购买
9. WHEN 用户查看credits余额 THEN 系统应清晰显示可用额度和使用记录

### 需求6：企业服务数据导向优化

**用户故事**: 作为企业客户，我希望获得专业的数据分析报告和催收统计，但理解平台不承诺具体成功率，以数据为导向做决策。

#### 验收标准
1. WHEN 企业客户查看报告 THEN 系统应提供详细的数据分析但不承诺成功率
2. WHEN 生成催收报告 THEN 系统应统计响应率、回收率等指标仅供参考
3. WHEN 企业客户咨询成功率 THEN 系统应明确说明"仅提供数据分析，不构成成功率承诺"
4. WHEN 系统计算统计数据 THEN 应包含免责声明和数据说明
5. WHEN 企业客户签约 THEN 合同应明确数据导向服务性质，不承诺具体结果
6. IF 企业客户要求成功率保证 THEN 系统应拒绝并说明服务模式

### 需求7：前端UI/UX现代化设计

**用户故事**: 作为用户，我希望看到专业、现代、美观的界面设计，特别是图标和视觉元素，提升平台的专业形象和用户体验。

#### 验收标准
1. WHEN 用户访问平台 THEN 界面应采用现代化的设计语言和专业的视觉风格
2. WHEN 用户查看图标 THEN 所有图标应使用专业的图标库（如Feather Icons、Heroicons等）
3. WHEN 用户使用功能 THEN 界面应有清晰的视觉层次和一致的设计规范
4. WHEN 用户进行操作 THEN 应有适当的动画反馈和交互效果
5. WHEN 用户在不同设备访问 THEN 界面应完全响应式适配
6. WHEN 用户查看数据 THEN 图表和数据可视化应美观且易于理解
7. IF 用户是律师 THEN 积分变化应有游戏化的视觉反馈效果
8. WHEN 用户使用演示账户 THEN 演示界面应有明确的视觉标识区分
9. WHEN 用户查看会员等级 THEN 应有清晰的等级标识和权益展示

## 非功能需求

### 性能需求
- 统一认证系统响应时间 < 1秒
- 律师积分计算和更新延迟 < 500ms
- 用户Credits支付处理时间 < 2秒
- 支持1000+并发用户访问
- 系统可用性 > 99.9%
- Credits支付系统处理能力 > 10000次/小时
- 前端页面加载时间 < 2秒（包含新的UI设计）

### 安全需求
- 工作台ID使用安全哈希，防止信息泄露
- 演示数据与真实数据完全隔离
- 律师证文件加密存储
- 积分变动完整审计日志
- 支付接口PCI DSS合规

### 可用性需求
- 统一认证界面现代化设计，专业图标和视觉元素
- 演示账户功能完整可用，视觉标识清晰
- 移动端完全适配所有功能，响应式设计
- 律师积分系统游戏化界面，等级展示清晰
- Credits余额和使用记录界面友好
- 多语言支持（中文优先）
- 无障碍访问支持
- 现代化图标库替换所有旧图标

### 可维护性需求
- 基于现有42张表扩展，避免重复开发
- 复用现有API端点，扩展功能
- 代码覆盖率 > 85%
- 完整的业务流程文档
- 自动化测试覆盖核心业务逻辑

### 兼容性需求
- 与现有用户数据完全兼容
- 支持现有律师平滑升级到新会员系统
- 保持现有API接口向后兼容
- 支持现有前端页面渐进式升级

## 约束条件

### 技术约束
- 必须基于现有FastAPI + PostgreSQL架构扩展
- 必须复用现有42张数据表结构
- 必须保持现有部署环境兼容性
- 必须确保数据迁移零丢失
- 仅安装8个必需的新依赖包，节省服务器资源

### 业务约束
- 统一认证系统上线期间不能影响现有用户登录
- 律师会员升级必须保持现有律师权益不降级
- 积分系统上线时需要为现有律师初始化合理积分
- Credits系统不能影响现有单一任务发布流程
- 企业服务优化不能违反现有合同条款

### 时间约束
- 统一认证系统：2周内完成
- 会员和积分系统：3周内完成
- Credits控制系统：1周内完成
- 企业服务优化：1周内完成
- 整体测试和上线：1周内完成
- 总计：8周内完成所有功能

### 资源约束
- 开发团队：基于现有代码扩展，减少开发工作量
- 服务器资源：精确依赖管理，节省200MB+内存
- 数据库：基于现有表扩展，新增13张表
- 预算：主要为开发成本，无需额外硬件投入

## 验收标准

### 技术指标
- [x] 统一认证系统成功上线，支持邮箱验证和律师证认证
- [x] 律师会员系统实现免费引流模式，付费转化率达到20%
- [x] 律师积分系统正常运行，积分计算准确率100%，等级升级逻辑正确
- [x] 用户Credits支付系统有效防止滥用，垃圾上传减少90%
- [x] 企业服务优化完成，移除成功率承诺相关内容
- [x] 演示账户系统正常运行，数据隔离安全
- [x] 前端UI现代化改造完成，专业图标和设计元素全面更新

### 业务指标
- [x] 用户注册转化率提升40%（统一认证系统优化）
- [x] 律师注册率提升300%（免费版吸引）
- [x] 付费律师会员转化率达到20%
- [x] 律师活跃度提升50%（积分激励和等级系统）
- [x] 批量任务滥用率降低90%（Credits支付控制）
- [x] 企业客户满意度提升至95%（数据导向服务）
- [x] 演示账户转化率达到30%
- [x] 用户界面满意度提升60%（现代化UI设计）

### 质量指标
- [x] 基于现有代码扩展，代码重用率 > 80%
- [x] 数据库迁移成功率100%，零数据丢失
- [x] 新增功能测试覆盖率 > 85%
- [x] 系统性能指标达标（响应时间、并发能力）
- [x] 安全性通过渗透测试，无高危漏洞
- [x] 文档完整性 > 90%

### 用户体验指标
- [x] 注册流程从3步简化为2步，体验提升50%
- [x] 登录后自动重定向，减少用户困惑
- [x] 演示账户无需注册即可体验，降低使用门槛
- [x] 律师积分变化有动画反馈，等级提升有庆祝效果
- [x] Credits余额清晰显示，支付流程用户理解度 > 95%
- [x] 界面图标专业化，用户视觉满意度 > 90%
- [x] 响应式设计完美适配，移动端体验评分 > 4.5/5
- [x] 数据可视化美观易懂，管理后台使用满意度 > 85%

## 风险评估

### 高风险
- **统一认证系统迁移**: 可能影响现有用户登录，需要详细的迁移计划
- **积分系统数据迁移**: 现有律师积分初始化需要准确计算
- **会员系统升级**: 现有律师权益不能降级，需要平滑过渡

### 中风险
- **Credits系统接受度**: 用户可能不理解新的批量上传限制
- **企业客户反应**: 移除成功率承诺可能引起客户疑虑
- **演示数据维护**: 演示账户数据需要定期更新维护

### 低风险
- **服务器资源**: 精确依赖管理，资源消耗可控
- **开发复杂度**: 基于现有代码扩展，技术风险较低
- **用户培训**: 功能相对简单，用户学习成本低

## 成功标准

项目成功的标志是：

### 核心业务目标达成
1. **统一认证系统**: 用户注册体验显著提升，律师认证流程规范化
2. **免费引流模式**: 律师注册量大幅增长，付费转化率达到预期
3. **积分激励系统**: 律师活跃度提升，平台生态更加活跃
4. **Credits控制**: 有效防止批量任务滥用，平台质量提升
5. **数据导向服务**: 企业客户满意度提升，法律风险降低

### 技术架构优化
1. 基于现有系统成功扩展，避免重复开发
2. 数据库结构合理扩展，性能保持稳定
3. 系统安全性和稳定性显著提升
4. 代码质量和可维护性提高

### 用户价值实现
1. 用户注册和使用体验显著改善
2. 律师收入和平台粘性提升
3. 企业客户获得更专业的数据服务
4. 平台整体服务质量和品牌形象提升

### 长期发展基础
1. 为平台规模化扩展奠定基础
2. 建立可持续的商业模式
3. 形成良性的生态循环
4. 为未来功能扩展预留空间

通过实现这些目标，Lawsker将成功转型为"不雇佣一个律师的巨型律师事务所"，实现平台价值最大化。